{% extends "base_public.html" %}

{% block title %}EFP Wealth — Quantitative Portfolio Management for Indian Equities{% endblock %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
{% endblock %}

{% block content %}

{% set h = metrics.get('hero', {}) %}
{% set c = content.get('landing', {}) %}

<!-- Hero (dark gradient, centered — V1 style) -->
<section class="hero-dark">
  <div class="container">
    <h1>{{ c.get('hero_headline', 'Systematic Alpha for <span class="text-gold">Serious Capital</span>') | safe }}</h1>
    <p class="hero-subtitle">
      {{ c.get('hero_subtitle', '') | fill_metrics(h) }}
    </p>

    <div class="hero-metrics-strip">
      <div class="hero-metric-box">
        <span class="hero-metric-value">{{ h.get('cagr', '29.3') }}%</span>
        <span class="hero-metric-label">{{ c.get('metric_labels', {}).get('cagr', 'CAGR') }}</span>
      </div>
      <div class="hero-metric-box">
        <span class="hero-metric-value">{{ h.get('sharpe', '1.71') }}</span>
        <span class="hero-metric-label">{{ c.get('metric_labels', {}).get('sharpe', 'Sharpe Ratio') }}</span>
      </div>
      <div class="hero-metric-box">
        <span class="hero-metric-value">{{ h.get('max_dd', '-19.3') }}%</span>
        <span class="hero-metric-label">{{ c.get('metric_labels', {}).get('max_dd', 'Max Drawdown') }}</span>
      </div>
      <div class="hero-metric-box">
        <span class="hero-metric-value">+{{ h.get('alpha', '17.0') }}%</span>
        <span class="hero-metric-label">{{ c.get('metric_labels', {}).get('alpha', 'Alpha vs NIFTY') }}</span>
      </div>
    </div>

    <div class="hero-period">
      Walk-forward out-of-sample results &middot;
      {{ h.get('period_start', 'Feb 2017') }} &mdash; {{ h.get('period_end', 'Feb 2026') }}
      ({{ h.get('years', '9.0') }} years)
    </div>

    <div class="hero-ctas">
      <a href="/about#contact" class="btn-primary">Schedule a Consultation</a>
      <a href="/performance" class="btn-text-light">View Track Record &rarr;</a>
    </div>
  </div>
</section>

<!-- Stat Bar -->
<div class="stat-bar">
  <div class="container">
    <div class="stat-bar-inner">
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('multiple', '10.1') }}x</span> Return Multiple
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('win_rate', '66') }}%</span> Monthly Win Rate
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ '{:,}'.format(h.get('trades', 2722)) }}</span> Trades Executed
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('windows', '17') }}</span> Validation Windows
      </div>
    </div>
  </div>
</div>

<!-- Equity Curve -->
<section class="chart-section">
  <div class="container">
    <div class="chart-container">
      <div class="chart-title">{{ c.get('equity_chart_title', 'Growth of &#x20B9;1 Crore') }}</div>
      <div class="chart-subtitle">
        {{ c.get('equity_chart_subtitle', 'Walk-forward out-of-sample results vs NIFTY 50 buy-and-hold. Normalised to 100 at inception.') }}
      </div>
      <div class="chart-canvas-wrap">
        <canvas id="equityChart"></canvas>
      </div>
      <div class="chart-footer">
        <a href="/performance" class="btn-text">View complete track record with annual returns and drawdown analysis &rarr;</a>
      </div>
    </div>
  </div>
</section>

<!-- Deep Dive -->
<section class="deep-dive-section">
  <div class="container">
    <h2 class="section-title">{{ c.get('deep_dive_title', 'Want the Full Picture?') }}</h2>
    <p class="section-subtitle">
      {{ c.get('deep_dive_subtitle', 'Detailed analytics dashboard with per-window breakdowns, drawdown analysis, and regime performance.') }}
    </p>
    <a href="/analytics" class="btn-primary">Deep Dive into Analytics &rarr;</a>
  </div>
</section>

<!-- Investment Process -->
<section class="process-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">How It Works</h2>
      <p class="section-subtitle">
        A systematic, rules-based process that removes emotion and
        replaces it with rigorous, repeatable methodology.
      </p>
    </div>

    <div class="process-grid">
      {% for step in c.get('process_steps', []) %}
      <div class="process-step">
        <div class="step-number">{{ loop.index }}</div>
        <h3>{{ step.title }}</h3>
        <p>{{ step.description | fill_metrics(h) }}</p>
      </div>
      {% endfor %}
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <a href="/approach" class="btn-text">Read the full methodology &rarr;</a>
    </div>
  </div>
</section>

<!-- Differentiation -->
<section class="diff-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">What Sets Us Apart</h2>
    </div>

    <table class="diff-table">
      <thead>
        <tr>
          <th></th>
          <th>Typical PMS</th>
          <th>Index Funds</th>
          <th>EFP Wealth</th>
        </tr>
      </thead>
      <tbody>
        {% for row in c.get('diff_table', {}).get('rows', []) %}
        <tr>
          <td>{{ row.label }}</td>
          <td>{{ row.typical_pms }}</td>
          <td>{{ row.index_funds }}</td>
          <td>{{ row.efp }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <div class="container">
    <h2>{{ c.get('cta_headline', 'For Qualified Investors Seeking Systematic,<br>Research-Driven Portfolio Management') | safe }}</h2>
    <p>{{ c.get('cta_body', 'Minimum investment &#x20B9;50 Lakhs.') }}</p>
    <a href="/about#contact" class="btn-primary">Schedule a Consultation</a>
    <div class="cta-contact">
      Or write to us at <a href="mailto:{{ c.get('cta_contact_email', 'inquiries@efpwealth.com') }}">{{ c.get('cta_contact_email', 'inquiries@efpwealth.com') }}</a>
    </div>
  </div>
</section>

<!-- Sticky Disclaimer -->
<div class="sticky-disclaimer">
  {{ content.get('disclaimers', {}).get('sticky_text', 'Past performance is hypothetical and does not guarantee future results. Not investment advice.') }}
  <a href="/about#contact">Full disclaimers</a>
</div>

{% endblock %}

{% block scripts %}
<script type="application/json" id="equityCurveData">{{ equity_curve_json | safe }}</script>
<script>
(function() {
  var raw = JSON.parse(document.getElementById('equityCurveData').textContent);
  if (!raw || !raw.wf) return;

  var ctx = document.getElementById('equityChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      datasets: [
        {
          label: 'EFP Wealth (Walk-Forward)',
          data: raw.wf.dates.map(function(d, i) { return { x: d, y: raw.wf.values[i] }; }),
          borderColor: '#C59A2C',
          backgroundColor: 'rgba(197, 154, 44, 0.05)',
          borderWidth: 2,
          pointRadius: 0,
          pointHitRadius: 6,
          fill: true,
          tension: 0.1
        },
        {
          label: 'NIFTY 50 (Buy & Hold)',
          data: raw.nifty.dates.map(function(d, i) { return { x: d, y: raw.nifty.values[i] }; }),
          borderColor: '#94A3B8',
          borderWidth: 1.5,
          borderDash: [6, 4],
          pointRadius: 0,
          pointHitRadius: 6,
          fill: false,
          tension: 0.1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            font: { family: "'Inter', sans-serif", size: 12 },
            color: '#64748B',
            usePointStyle: true,
            pointStyle: 'line',
            padding: 20
          }
        },
        tooltip: {
          backgroundColor: '#1B2A4A',
          titleFont: { family: "'Inter', sans-serif", size: 12 },
          bodyFont: { family: "'JetBrains Mono', monospace", size: 12 },
          padding: 12,
          callbacks: {
            label: function(ctx) {
              return ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(0);
            }
          }
        }
      },
      scales: {
        x: {
          type: 'time',
          time: { unit: 'year', displayFormats: { year: 'yyyy' } },
          grid: { color: '#F1F5F9' },
          ticks: { font: { family: "'Inter', sans-serif", size: 11 }, color: '#94A3B8' }
        },
        y: {
          type: 'logarithmic',
          grid: { color: '#F1F5F9' },
          ticks: {
            font: { family: "'JetBrains Mono', monospace", size: 11 },
            color: '#94A3B8',
            callback: function(v) { return v; }
          }
        }
      }
    }
  });
})();
</script>
{% endblock %}

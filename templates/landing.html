{% extends "base_public.html" %}

{% block title %}EFP Wealth â€” Quantitative Portfolio Management for Indian Equities{% endblock %}

{% block head %}
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3.0.0/dist/chartjs-adapter-date-fns.bundle.min.js"></script>
{% endblock %}

{% block content %}

{% set h = metrics.get('hero', {}) %}

<!-- Hero -->
<section class="hero">
  <div class="container">
    <div class="hero-grid">
      <div class="hero-content">
        <h1>Quantitative Portfolio Management for Indian Equities</h1>
        <p class="hero-subtitle">
          A 13-factor, regime-aware strategy with walk-forward validation across
          {{ h.get('years', '9.0') }} years. Designed for patient, long-term capital
          seeking systematic alpha with institutional-grade risk management.
        </p>
        <div class="hero-ctas">
          <a href="/about#contact" class="btn-primary">Schedule a Consultation</a>
          <a href="/performance" class="btn-text">View Track Record &rarr;</a>
        </div>
      </div>

      <div class="metrics-card">
        <div class="metrics-card-header">Walk-Forward Results</div>
        <div class="metrics-card-period">
          {{ h.get('period_start', 'Feb 2017') }} &mdash; {{ h.get('period_end', 'Feb 2026') }}
          ({{ h.get('years', '9.0') }} years)
        </div>
        <table class="metrics-table">
          <tr>
            <td>CAGR</td>
            <td class="text-green">{{ h.get('cagr', '29.3') }}%</td>
          </tr>
          <tr>
            <td>Sharpe Ratio</td>
            <td>{{ h.get('sharpe', '1.71') }}</td>
          </tr>
          <tr>
            <td>Max Drawdown</td>
            <td class="text-red">{{ h.get('max_dd', '-19.3') }}%</td>
          </tr>
          <tr>
            <td>Alpha vs NIFTY 50</td>
            <td class="text-green">+{{ h.get('alpha', '17.0') }}%</td>
          </tr>
          <tr>
            <td>Beta</td>
            <td>{{ h.get('beta', '0.61') }}</td>
          </tr>
          <tr>
            <td>Calmar Ratio</td>
            <td>{{ h.get('calmar', '1.52') }}</td>
          </tr>
        </table>
      </div>
    </div>
  </div>
</section>

<!-- Stat Bar -->
<div class="stat-bar">
  <div class="container">
    <div class="stat-bar-inner">
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('multiple', '10.1') }}x</span> Return Multiple
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('win_rate', '66') }}%</span> Monthly Win Rate
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ '{:,}'.format(h.get('trades', 2722)) }}</span> Trades Executed
      </div>
      <div class="stat-bar-item">
        <span class="stat-bar-value mono">{{ h.get('windows', '17') }}</span> Validation Windows
      </div>
    </div>
  </div>
</div>

<!-- Equity Curve -->
<section class="chart-section">
  <div class="container">
    <div class="chart-container">
      <div class="chart-title">Growth of &#x20B9;1 Crore</div>
      <div class="chart-subtitle">
        Walk-forward out-of-sample results vs NIFTY 50 buy-and-hold. Normalised to 100 at inception.
      </div>
      <div class="chart-canvas-wrap">
        <canvas id="equityChart"></canvas>
      </div>
      <div class="chart-footer">
        <a href="/performance" class="btn-text">View complete track record with annual returns and drawdown analysis &rarr;</a>
      </div>
    </div>
  </div>
</section>

<!-- Investment Process -->
<section class="process-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">How It Works</h2>
      <p class="section-subtitle">
        A systematic, rules-based process that removes emotion and
        replaces it with rigorous, repeatable methodology.
      </p>
    </div>

    <div class="process-grid">
      <div class="process-step">
        <div class="step-number">1</div>
        <h3>Factor-Based Stock Selection</h3>
        <p>
          13 quantitative factors spanning momentum, value, quality, and low volatility.
          Cross-sectional ranking of NIFTY LargeMidcap 250 constituents.
          Top 20 positions, conviction-weighted monthly.
        </p>
      </div>
      <div class="process-step">
        <div class="step-number">2</div>
        <h3>Regime-Aware Allocation</h3>
        <p>
          7-signal ensemble detects market regimes on a continuous scale.
          Dynamically allocates between equities, gold, and debt based on conviction.
          Achieved {{ h.get('beta', '0.61') }} beta with {{ h.get('max_dd', '-19.3') }}% max drawdown.
        </p>
      </div>
      <div class="process-step">
        <div class="step-number">3</div>
        <h3>Walk-Forward Validation</h3>
        <p>
          {{ h.get('windows', '17') }} non-overlapping out-of-sample windows.
          2-year training, 6-month testing, rolled forward sequentially.
          Survivorship-bias-free using 96 NSE constituent snapshots.
        </p>
      </div>
    </div>

    <div style="text-align: center; margin-top: 40px;">
      <a href="/approach" class="btn-text">Read the full methodology &rarr;</a>
    </div>
  </div>
</section>

<!-- Differentiation -->
<section class="diff-section">
  <div class="container">
    <div class="section-header">
      <h2 class="section-title">What Sets Us Apart</h2>
    </div>

    <table class="diff-table">
      <thead>
        <tr>
          <th></th>
          <th>Typical PMS</th>
          <th>Index Funds</th>
          <th>EFP Wealth</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>Stock Selection</td>
          <td>Discretionary / conviction-based</td>
          <td>Market-cap weighted, no selection</td>
          <td>13-factor quantitative model</td>
        </tr>
        <tr>
          <td>Validation</td>
          <td>In-sample backtest or none</td>
          <td>Tracks index (no alpha claim)</td>
          <td>Walk-forward out-of-sample</td>
        </tr>
        <tr>
          <td>Market Timing</td>
          <td>Ad hoc cash calls</td>
          <td>Fully invested always</td>
          <td>Systematic regime detection</td>
        </tr>
        <tr>
          <td>Survivorship Bias</td>
          <td>Rarely addressed</td>
          <td>Not applicable</td>
          <td>96 point-in-time NSE snapshots</td>
        </tr>
        <tr>
          <td>Transparency</td>
          <td>Quarterly letters</td>
          <td>Full holdings public</td>
          <td>Complete methodology disclosed</td>
        </tr>
      </tbody>
    </table>
  </div>
</section>

<!-- CTA -->
<section class="cta-section">
  <div class="container">
    <h2>For Qualified Investors Seeking Systematic,<br>Research-Driven Portfolio Management</h2>
    <p>
      Minimum investment &#x20B9;50 Lakhs. Available to accredited investors
      who understand and accept the risks of systematic equity strategies.
    </p>
    <a href="/about#contact" class="btn-primary">Schedule a Consultation</a>
    <div class="cta-contact">
      Or write to us at <a href="mailto:inquiries@efpwealth.com">inquiries@efpwealth.com</a>
    </div>
  </div>
</section>

{% endblock %}

{% block scripts %}
<script type="application/json" id="equityCurveData">{{ equity_curve_json | safe }}</script>
<script>
(function() {
  var raw = JSON.parse(document.getElementById('equityCurveData').textContent);
  if (!raw || !raw.wf) return;

  var ctx = document.getElementById('equityChart').getContext('2d');
  new Chart(ctx, {
    type: 'line',
    data: {
      datasets: [
        {
          label: 'EFP Wealth (Walk-Forward)',
          data: raw.wf.dates.map(function(d, i) { return { x: d, y: raw.wf.values[i] }; }),
          borderColor: '#C59A2C',
          backgroundColor: 'rgba(197, 154, 44, 0.05)',
          borderWidth: 2,
          pointRadius: 0,
          pointHitRadius: 6,
          fill: true,
          tension: 0.1
        },
        {
          label: 'NIFTY 50 (Buy & Hold)',
          data: raw.nifty.dates.map(function(d, i) { return { x: d, y: raw.nifty.values[i] }; }),
          borderColor: '#94A3B8',
          borderWidth: 1.5,
          borderDash: [6, 4],
          pointRadius: 0,
          pointHitRadius: 6,
          fill: false,
          tension: 0.1
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      interaction: { mode: 'index', intersect: false },
      plugins: {
        legend: {
          position: 'top',
          align: 'end',
          labels: {
            font: { family: "'Inter', sans-serif", size: 12 },
            color: '#64748B',
            usePointStyle: true,
            pointStyle: 'line',
            padding: 20
          }
        },
        tooltip: {
          backgroundColor: '#1B2A4A',
          titleFont: { family: "'Inter', sans-serif", size: 12 },
          bodyFont: { family: "'JetBrains Mono', monospace", size: 12 },
          padding: 12,
          callbacks: {
            label: function(ctx) {
              return ctx.dataset.label + ': ' + ctx.parsed.y.toFixed(0);
            }
          }
        }
      },
      scales: {
        x: {
          type: 'time',
          time: { unit: 'year', displayFormats: { year: 'yyyy' } },
          grid: { color: '#F1F5F9' },
          ticks: {
            font: { family: "'Inter', sans-serif", size: 11 },
            color: '#94A3B8'
          }
        },
        y: {
          type: 'logarithmic',
          grid: { color: '#F1F5F9' },
          ticks: {
            font: { family: "'JetBrains Mono', monospace", size: 11 },
            color: '#94A3B8',
            callback: function(v) { return v; }
          }
        }
      }
    }
  });
})();
</script>
{% endblock %}
